<!DOCTYPE html>
<html>
<head>
    <title>Clear Auth</title>
</head>
<body>
    <h1>Clear Authentication</h1>
    <button onclick="clearAuth()">Clear Auth & Reload</button>
    <script>
        function clearAuth() {
            localStorage.removeItem('authToken');
            alert('Auth cleared! Redirecting to login...');
            window.location.href = '/admin/login';
        }
        
        // Show current token info
        const token = localStorage.getItem('authToken');
        if (token) {
            console.log('Current token:', token);
            // Decode JWT payload (simple base64 decode)
            try {
                const payload = JSON.parse(atob(token.split('.')[1]));
                console.log('Token payload:', payload);
                document.body.innerHTML += '<p>Current role in token: ' + payload.role + '</p>';
            } catch (e) {
                console.log('Could not decode token');
            }
        }
    </script>
</body>
</html>